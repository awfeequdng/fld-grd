(function(t,e){if(typeof define==="function"&&define.amd){define("FldGrd",["module","exports"],e)}else if(typeof exports!=="undefined"){e(module,exports)}else{var i={exports:{}};e(i,i.exports);t.FldGrd=i.exports}})(this,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var i={rowHeight:250,itemSelector:"*",objSelector:"img",dataWidth:"data-fld-width",dataHeight:"data-fld-height"};function s(t,e){var i=[];var s=null;var n=null;var r=null;s=e.split(",");if(!t.id){r="_temp_"+Math.random().toString(36).substr(2,10);t.setAttribute("id",r)}while(s.length){i.push("#"+t.id+" > "+s.pop())}n=document.querySelectorAll(i.join(", "));if(r){t.removeAttribute("id")}return n}function n(t){for(var e=arguments.length,i=Array(e>1?e-1:0),s=1;s<e;s++){i[s-1]=arguments[s]}var n=Object(t);Object.keys(i).forEach(function(t){if(i[t]!==undefined&&i[t]!==null){Object.keys(i[t]).forEach(function(e){n[e]=i[t][e]})}});return n}var r=function h(t,e){if(!(t instanceof Element)){throw new Error("`el` is not an element")}this.el=t;this.items=[];this._props={gutter:null,pendingResize:false};this._bind={};this._settings=n({},i,e);this._init();return this};r.prototype={_init:function o(){this._setup();this._attachEventListeners();this.update()},_setup:function a(){var t=null;var e=null;var i=null;var n=null;var r=null;var h=0;t=s(this.el,this._settings.itemSelector);n=t.length;r=getComputedStyle(t[0],null);this._props.gutter+=parseInt(r.marginLeft,10)||0;this._props.gutter+=parseInt(r.marginRight,10)||0;this._props.gutter+=parseInt(r.paddingLeft,10)||0;this._props.gutter+=parseInt(r.paddingRight,10)||0;for(;h<n;h++){e=parseInt(t[h].getAttribute(this._settings.dataWidth),10);i=parseInt(t[h].getAttribute(this._settings.dataHeight),10);if(isNaN(e)||isNaN(i)){continue}this.items.push({width:e,normWidth:e*(this._settings.rowHeight/i),height:i,el:t[h].querySelector(this._settings.objSelector)})}},update:function l(){var t=this.el.clientWidth;var e=this.items.length;var i=false;var s=0;var n=0;var r=0;var h=0;var o=0;var a=0;var l=0;var d=0;var u=0;for(;d<e;d++){n+=this.items[d].normWidth;h+=this._props.gutter;i=d===e-1;if(n+h>=t||i){r=t-h;a=Math.min(r/n,1);o=Math.floor(a*this._settings.rowHeight);for(u=s;u<=d;u++){l=Math.floor(a*this.items[u].normWidth)-1;this.items[u].el.style.width=l+"px";this.items[u].el.style.height=o+"px"}n=0;h=0;s=d+1}}this._props.pendingResize=false;return this},_attachEventListeners:function d(){this._bind.resize=this._onResize.bind(this);window.addEventListener("resize",this._bind.resize)},_onResize:function u(){if(!this._props.pendingResize){this._props.pendingResize=true;window.requestAnimationFrame(this.update.bind(this))}},destroy:function p(){window.removeEventListener("resize",this._bind.resize);this.el=this.items=this._bind=this._settings=this._handlers=null}};e.default=r;t.exports=e["default"]});